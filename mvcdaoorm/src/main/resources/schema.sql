CREATE TABLE Employees (
  userid int NOT NULL,
  username varchar(20) NOT NULL,
  password varchar(64),
  enabled int NOT NULL,
  firstname varchar(20),
  lastname varchar(20), 
  PRIMARY KEY (userid)
);
 
CREATE TABLE Roles (
  roleid int NOT NULL,
  userid int NOT NULL,
  role varchar(20) NOT NULL,
  PRIMARY KEY (roleid)
);

CREATE TABLE PORTAL_USER (
	USER_ID INT NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1),
	USERNAME VARCHAR(50) NOT NULL,
	PASSWORD VARCHAR(64),
	PASSCODE INTEGER,
	FORENAME VARCHAR(30) NOT NULL,
	LASTNAME VARCHAR(50) NOT NULL,
	MERCHANT_ID INTEGER,
	EMAIL_ADDRESS VARCHAR(50) NOT NULL,
	PHONE_NUMBER INTEGER,
	MOBILE_NUMBER INTEGER,
	IS_ACTIVE INT NOT NULL,
	BLOCK_CODE INT,
	CREATION_DATE TIMESTAMP,
	ACTIVATION_DATE TIMESTAMP,
	LAST_LOGIN_DATE TIMESTAMP,
	ALLIANCE_ID INTEGER,
	TOKEN VARCHAR(64),
	IP_ADDRESS VARCHAR(20),
	LOGIN_COUNT INT,
	ACCOUNT_EXPIRATION_DATE TIMESTAMP,
	ACCOUNT_STATUS VARCHAR(15),
	PASSWORD_EXPIRATION_DATE TIMESTAMP,
	PRIMARY KEY (USER_ID),
	UNIQUE(USERNAME)
);

CREATE TABLE PORTAL_USER_FUNCTION (
	USER_FUNCTION_ID INT NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1),
	ROLE_FUNCTION_ID INT NOT NULL,
	USER_ID INT NOT NULL,
	PRIMARY KEY (USER_FUNCTION_ID)
);

CREATE TABLE PORTAL_ROLE_FUNCTION (
	ROLE_FUNCTION_ID INT NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1),
	PORTAL_FUNCTION_ID INT NOT NULL,
	ROLE_ID INT NULL,
	CAN_READ INT NOT NULL,
	CAN_CREATE INT NOT NULL,
	CAN_UPDATE INT NOT NULL,
	PRIMARY KEY (ROLE_FUNCTION_ID)
);

CREATE TABLE PORTAL_FUNCTION (
	PORTAL_FUNCTION_ID INT NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1),
	NAME VARCHAR(30) NOT NULL,
	DESCRIPTION VARCHAR(50),
	REST_URL VARCHAR(100) NOT NULL,
	PRIMARY KEY (PORTAL_FUNCTION_ID)
);

CREATE TABLE PORTAL_ROLE (
	ROLE_ID INT NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1),
	NAME VARCHAR(30) NOT NULL,
	DESCRIPTION VARCHAR(50) ,
	PRIMARY KEY (ROLE_ID)
);

 